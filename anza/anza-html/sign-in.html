{% extends 'new_base.html' %}
{% load static %}

{% block title %}
<title>Sign In - Bizmob</title>
{% endblock %}
{% block meta %}
<meta property="og:title" content="Sign-In - Bizmob" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta charset="utf-8" />
{% endblock %}
{% block script %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
{% endblock %}
{% block style %}
<style data-tag="reset-style-sheet">
  html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
</style>
<style data-tag="default-style-sheet">
  html {
    font-family: Inter;
    font-size: 16px;
  }

  body {
    font-weight: 400;
    font-style:normal;
    text-decoration: none;
    text-transform: none;
    letter-spacing: normal;
    line-height: 1.15;
    color: var(--dl-color-theme-neutral-dark);
    background-color: var(--dl-color-theme-neutral-light);

    fill: var(--dl-color-theme-neutral-dark);
  }
</style>
{% endblock %}
{% block link %}
<link
  rel="stylesheet"
  href="https://unpkg.com/animate.css@4.1.1/animate.css"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
  data-tag="font"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap"
  data-tag="font"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@200;300;400;500;600;700;800&amp;display=swap"
  data-tag="font"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=STIX+Two+Text:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap"
  data-tag="font"
/>
<link
  rel="stylesheet"
  href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
/>
<link rel="stylesheet" href="{% static './style.css' %}" />
<link href="{% static './sign-in.css' %}" rel="stylesheet" />
<link rel="stylesheet" href="{% static './new-styles.css' %}" />
{% endblock %}
{% block divclass %}sign-in-container{% endblock %}
{% block content %}
<div class="sign-in2-container thq-section-padding">
  <div class="sign-in2-max-width thq-section-max-width">
    <div class="sign-in2-form-root">
      <h2 class="sign-in2-text thq-heading-2">
        <span>Welcome back! Sign in to your account</span>
      </h2>
      <div class="sign-in2-container1">
        <button class="sign-in2-button thq-button-outline">
          <svg
            viewBox="0 0 860.0137142857142 1024"
            class="sign-in2-icon"
          >
            <path
              d="M438.857 449.143h414.286c4 22.286 6.857 44 6.857 73.143 0 250.286-168 428.571-421.143 428.571-242.857 0-438.857-196-438.857-438.857s196-438.857 438.857-438.857c118.286 0 217.714 43.429 294.286 114.857l-119.429 114.857c-32.571-31.429-89.714-68-174.857-68-149.714 0-272 124-272 277.143s122.286 277.143 272 277.143c173.714 0 238.857-124.571 249.143-189.143h-249.143v-150.857z"
            ></path>
          </svg>
          <span class="thq-body-small">Continue with Google</span>
        </button>
      </div>
      <div class="sign-in2-divider">
        <div class="sign-in2-divider1"></div>
        <span class="thq-body-large">OR</span>
        <div class="sign-in2-divider2"></div>
      </div>
      <div class="sign-in2-form">
        <form class="sign-in2-form1" method="post" id="LoginForm">
          {% csrf_token %}
          <div class="sign-in2-email">
            <label for="id_username" class="thq-body-large">
              Email
            </label>
            <input
              type="email"
              name="username"
              id="id_username"
              required="true"
              placeholder="Email address"
              class="sign-in2-textinput thq-input thq-body-large"
            />
          </div>
          <div class="sign-in2-password">
            <div class="sign-in2-container2">
              <label
                for="id_password"
                class="thq-body-large"
              >
                Password
              </label>
            </div>
            <input
              type="password"
              name="password"
              id="id_password"
              required="true"
              placeholder="Password"
              class="sign-in2-textinput1 thq-input thq-body-large"
            />
          </div>
          <div class="sign-up4-container3">
            <div class="sign-up4-terms-agree">
              <input
                type="checkbox"
                id="thq-sign-up-4-terms"
                class="thq-checkbox"
              />
              <label for="thq-sign-up-4-terms" class="thq-body-large">
                <span>
                  Show password
                </span>
                <span></span>
              </label>
            </div>
          </div>
        <div class="sign-in2-container3">
          <button
            type="submit"
            class="sign-in2-button1 thq-button-filled"
          >
            <span class="sign-in2-text06 thq-body-small">
              <span>Sign In</span>
            </span>
          </button>
          <div class="sign-in2-terms-agree">
            <p class="thq-body-large">
              <span>
                By continuing, you agree to the Terms of use and Privacy
                Policy.
              </span>
              <span></span>
            </p>
          </div>
          <button type="button" class="sign-in2-button2 thq-button-outline">
            <span class="sign-in2-text11 thq-body-small">
              <!-- <span>Create an account</span> -->
              <a href="{% url 'password_reset' %}">Forgot password</a>
            </span>
          </button>
        </div>
        </form>
        <div class="sign-in2-have-an-account-login"></div>
      </div>
    </div>
    <div class="sign-in2-container4">
      <div class="sign-in2-divider3"></div>
      <span class="thq-body-large">
        <span>Don't have an account?</span>
      </span>
      <button type="button" class="sign-in2-button2 thq-button-outline">
        <span class="sign-in2-text11 thq-body-small">
          <!-- <span>Create an account</span> -->
          <a href="{% url 'signup' %}">Create an account</a>
        </span>
      </button>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts_end %}
<script
defer=""
src="https://unpkg.com/@teleporthq/teleport-custom-scripts"
></script>
<script>
const showpassword = document.getElementById('thq-sign-up-4-terms');
const password = document.getElementById('id_password');
showpassword.addEventListener('change', () => {
  if (showpassword.checked) {
    password.type = 'text';
  } else {
    password.type = 'password';
  }
});
</script>
<script>
$(document).ready(function(){
  $('#LoginForm').submit(function(e){
    e.preventDefault();
    e.stopPropagation();

    const formData = new FormData(this);

    $.ajax({
      type: 'POST',
      url: '{% url "login" %}',
      data: formData,
      processData: false,
      contentType: false,
      success: function(response){
          window.location.href = '/';
      },
      error: function(xhr){
        console.log(xhr.responseText);
        const errors = JSON.parse(xhr.responseText);
        console.log(errors);
        const errorMessage = errors['__all__'][0]['message'];
        alert(errorMessage);
      }
    })
  })
})
</script>
{% endblock %}